<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons class="boton_retroceder" slot="start">
      <ion-back-button defaultHref="/inicio/home"></ion-back-button>
    </ion-buttons>
    <ion-title class="Titulo_Reporte">Realiza Tu Reporte!</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="fondo">
  <div class="app-container">
    <div class="form-container">
      <form>
        <!-- Tipo de Incendio -->
        <label class="my-label">Tipo de Reporte</label>
        <ion-select class="input" placeholder="Seleccione el tipo de reporte" [(ngModel)]="formIncendio.typeIncident">
          <ion-select-option value="1">Doméstico</ion-select-option>
          <ion-select-option value="2">Departamento</ion-select-option>
          <ion-select-option value="3">Forestal</ion-select-option>
        </ion-select>

        <!-- Ubicación -->
        <label class="my-label">Ubicación</label>
        <ion-button class="input_boton" expand="full" (click)="goToLocationPage()">
          <ion-icon size="large" name="location"></ion-icon>
        </ion-button>
        <input type="text" class="form-control" id="ubicacion" placeholder="Inserte Ubicación"
          [(ngModel)]="formIncendio.coordinate" [value]="formIncendio.coordinate | json" readonly />

        <!-- Tomar Foto -->
        <label class="my-label">Imagen (Opcional)</label>
        <ion-button class="input_boton" expand="full" (click)="takePhoto()">
          <ion-icon size="large" name="camera-outline"></ion-icon>
        </ion-button>
        <ion-item *ngIf="formIncendio.photo">
          <ion-img size="large" name="camera-outline" [src]="formIncendio.photo" class="adj_foto"></ion-img>
        </ion-item>

        <!-- Información Adicional -->
        <label class="my-label">Detalles</label>
        <textarea class="form-control area_descripcion" id="detalles" placeholder="Describe cualquier detalle que ayude a los bomberos"
          name="description" [(ngModel)]="formIncendio.description"></textarea>

        <!-- Contador de caracteres -->
        <div class="char-counter">{{ formIncendio.description?.length || 0 }} / 200</div>

        <ion-button expand="full" (click)="validateForm()" class="input_boton">
          Reportar
        </ion-button>

        <div class="card mb-3">
          <div class="card-body text-center">
            <div><strong>Recuerde que el reporte llegará directamente a bomberos</strong></div>
            <div><strong>Solo de ser necesario llame a </strong></div>
            <a href="tel:132" class="btn btn-warning d-flex align-items-center justify-content-center">
              <i class="bi bi-telephone-fill me-2"></i>
              <strong>Numero de Bomberos</strong>
            </a>
          </div>
        </div>
      </form>
    </div>
  </div>
</ion-content>
